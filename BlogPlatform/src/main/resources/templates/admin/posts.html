<!doctype html>
<html lang="pl" xmlns:th="http://www.thymeleaf.org"
	  th:replace="~{fragments/layout :: uklad(~{::title}, ~{::section})}">
<head>
	<title>Posty</title>
</head>
<section>
	<div class="d-flex justify-content-between align-items-center mb-4 page-header">
		<h1 class="mb-0">Posty</h1>
		<a class="btn btn-outline-secondary" th:href="@{/admin}">Powrot</a>
	</div>
	<table class="table table-striped bg-white shadow-sm">
		<thead>
		<tr>
			<th>Tytul</th>
			<th>Srednia ocen</th>
			<th>Komentarze</th>
			<th></th>
		</tr>
		</thead>
		<tbody>
		<tr th:each="post : ${posty}">
			<td>
				<a th:href="@{/posts/{idPosta}(idPosta=${post.id})}" th:text="${post.tytul}">Tytul</a>
			</td>
			<td th:text="${#numbers.formatDecimal(post.sredniaOcena, 1, 2)}">0</td>
			<td th:text="${post.liczbaKomentarzy}">0</td>
			<td class="text-end">
				<a class="btn btn-sm btn-outline-primary"
				   th:href="@{/api/v1/admin/export/posts/{idPosta}/pdf(idPosta=${post.id})}">
					PDF
				</a>
				<form class="d-inline" th:action="@{/admin/posts/{idPosta}/delete(idPosta=${post.id})}" method="post">
					<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
					<button class="btn btn-sm btn-outline-danger" type="submit">Usun</button>
				</form>
			</td>
		</tr>
		<tr th:if="${#lists.isEmpty(posty)}">
			<td colspan="4" class="text-muted">Brak postow.</td>
		</tr>
		</tbody>
	</table>
</section>
</html>
